
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: keystoresentinels.config.polyglot.systems
spec:
  group: config.polyglot.systems
  names:
    kind: KeystoreSentinel
    listKind: KeystoreSentinelList
    plural: keystoresentinels
    singular: keystoresentinel
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: KeystoreSentinel is the Schema for the keystoresentinels API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: KeystoreSentinelSpec defines the desired state of KeystoreSentinel
            properties:
              alert:
                description: Alerts is where the alerts will be sent to
                properties:
                  config:
                    description: AlertConfiguration is optional when only using `logger`
                      as the AlertType, but with SMTP it must be defined
                    properties:
                      reportInterval:
                        description: ReportInterval is the frequency in which Reports
                          would be sent out - can be `daily`, `weekly`, `monthly`,
                          or `debug` which is every 5 minutes.  Defaults to daily.
                        type: string
                      smtp_auth_secret:
                        description: SMTPAuthSecretName is the name of the K8s Secret
                          that holds the authentication information
                        type: string
                      smtp_auth_type:
                        description: SMTPAuthType can be either `none`, `plain`, `login`,
                          or `cram-md5`
                        type: string
                      smtp_destination_addresses:
                        description: SMTPDestinationEmailAddresses is where the alert
                          messages will be sent TO
                        items:
                          type: string
                        type: array
                      smtp_endpoint:
                        description: SMTPEndpoint is the SMTP server with affixed
                          port ie, smtp.example.com:25
                        type: string
                      smtp_sender_address:
                        description: SMTPSenderEmailAddress is the address that will
                          be used to send the alert messages
                        type: string
                      smtp_sender_hostname:
                        description: SMTPSenderHostname is the hostname used during
                          SMTP handshake
                        type: string
                      smtp_use_ssl:
                        description: SMTPAuthUseSSL can be used to set the use of
                          TLS, default is true
                        type: boolean
                      smtp_use_starttls:
                        description: SMTPAuthUseSTARTTLS can be used to set the use
                          of STARTTLS, default is true
                        type: boolean
                    type: object
                  name:
                    description: AlertName is a simple DNS/k8s compliant name for
                      identification purposes
                    type: string
                  type:
                    description: 'AlertType - valid values are: ''email'' and ''logger'''
                    type: string
                required:
                - name
                - type
                type: object
              scanningInterval:
                description: ScanningInterval is how frequently the controller scans
                  the cluster for these targets - defaults to 30s
                type: integer
              target:
                description: Targets is the list of K8s Objects to watch on the cluster
                properties:
                  apiVersion:
                    description: APIVersion corresponds to the target kind apiVersion,
                      so v1 is all really
                    type: string
                  daysOut:
                    description: DaysOut is the slice of days out alerts should be
                      triggered at.  Defaults to 30, 60, and 90
                    items:
                      type: integer
                    type: array
                  keystorePassword:
                    description: KeystorePassword corresponds to the source for the
                      the KeystorePassword
                    properties:
                      list:
                        items:
                          type: string
                        type: array
                      secret:
                        description: SecretReference provides the internal Secret
                          reference to unlock the Keystore
                        properties:
                          key:
                            type: string
                          name:
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      type:
                        description: Type could be 'secret' or 'list'
                        type: string
                    required:
                    - type
                    type: object
                  kind:
                    description: Kind can be either ConfigMap or Secret
                    type: string
                  labels:
                    description: Labels is an optional slice of key pair labels to
                      target, which will limit the scope of the matched objects to
                      only ones with those labels
                    items:
                      type: string
                    type: array
                  name:
                    description: TargetName is a simple DNS/k8s compliant name for
                      identification purposes
                    type: string
                  namespaces:
                    description: Namespaces is the slice of namespaces to watch on
                      the cluster - can be a single wildcard to watch all namespaces
                    items:
                      type: string
                    type: array
                  serviceAccount:
                    description: ServiceAccount is the ServiceAccount to use in order
                      to scan the cluster - this allows for separate RBAC per targeted
                      object
                    type: string
                required:
                - apiVersion
                - keystorePassword
                - kind
                - name
                - namespaces
                - serviceAccount
                type: object
            required:
            - alert
            - target
            type: object
          status:
            description: KeystoreSentinelStatus defines the observed state of KeystoreSentinel
            properties:
              discoveredKeystores:
                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state
                  of cluster Important: Run "make" to regenerate code after modifying
                  this file'
                items:
                  description: DiscoveredKeystore provides the status structure of
                    what keystores have certificates that have been discovered on
                    the cluster
                  properties:
                    kind:
                      type: string
                    name:
                      type: string
                    namespace:
                      type: string
                  required:
                  - kind
                  - name
                  - namespace
                  type: object
                type: array
              keystoresAtRisk:
                description: KeystoresAtRisk is the slice of CertificateInformation
                  that list the discovered certificates that are about to expire
                items:
                  description: KeystoreAtRisk provides the status structure of what
                    keystores have certificates that are about to expire and from
                    what CA
                  properties:
                    expiration:
                      type: string
                    kind:
                      type: string
                    name:
                      type: string
                    namespace:
                      type: string
                  required:
                  - expiration
                  - kind
                  - name
                  - namespace
                  type: object
                type: array
              lastReportSent:
                description: LastReportSent is the time the report has been sent out
                  by this Operator controller and when
                format: int64
                type: integer
            required:
            - discoveredKeystores
            - keystoresAtRisk
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
